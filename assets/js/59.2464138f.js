(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{289:function(t,a,s){"use strict";s.r(a);var n=s(11),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"java-å†…å­˜ç®¡ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å†…å­˜ç®¡ç†"}},[t._v("#")]),t._v(" Java å†…å­˜ç®¡ç†")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ğŸ“¦ æœ¬æ–‡ä»¥åŠç¤ºä¾‹æºç å·²å½’æ¡£åœ¨ "),s("a",{attrs:{href:"https://github.com/dunwu/javacore/",target:"_blank",rel:"noopener noreferrer"}},[t._v("javacore"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"ä¸€ã€å†…å­˜ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€å†…å­˜ç®€ä»‹"}},[t._v("#")]),t._v(" ä¸€ã€å†…å­˜ç®€ä»‹")]),t._v(" "),s("h3",{attrs:{id:"ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜"}},[t._v("#")]),t._v(" ç‰©ç†å†…å­˜å’Œè™šæ‹Ÿå†…å­˜")]),t._v(" "),s("p",[t._v("æ‰€è°“ç‰©ç†å†…å­˜å°±æ˜¯é€šå¸¸æ‰€è¯´çš„ RAMï¼ˆéšæœºå­˜å‚¨å™¨ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("è™šæ‹Ÿå†…å­˜ä½¿å¾—å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œæ—¶å¯ä»¥å…±äº«ç‰©ç†å†…å­˜ï¼Œè¿™é‡Œçš„å…±äº«åªæ˜¯ç©ºé—´ä¸Šå…±äº«ï¼Œåœ¨é€»è¾‘ä¸Šå½¼æ­¤ä»ç„¶æ˜¯éš”ç¦»çš„ã€‚")]),t._v(" "),s("h3",{attrs:{id:"å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´"}},[t._v("#")]),t._v(" å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªè®¡ç®—é€šå¸¸æœ‰å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯ç¨‹åºå¹¶ä¸èƒ½ä½¿ç”¨å…¨éƒ¨çš„ç©ºé—´ã€‚å› ä¸ºè¿™äº›ç©ºé—´è¢«åˆ’åˆ†ä¸ºå†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´ï¼Œè€Œç¨‹åºåªèƒ½ä½¿ç”¨ç”¨æˆ·ç©ºé—´çš„å†…å­˜ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ä½¿ç”¨å†…å­˜çš„-java-ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨å†…å­˜çš„-java-ç»„ä»¶"}},[t._v("#")]),t._v(" ä½¿ç”¨å†…å­˜çš„ Java ç»„ä»¶")]),t._v(" "),s("p",[t._v("Java å¯åŠ¨åï¼Œä½œä¸ºä¸€ä¸ªè¿›ç¨‹è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸­ã€‚")]),t._v(" "),s("p",[t._v("æœ‰å“ªäº› Java ç»„ä»¶éœ€è¦å ç”¨å†…å­˜å‘¢ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("å †å†…å­˜ï¼šJava å †ã€ç±»å’Œç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("æ ˆå†…å­˜ï¼šçº¿ç¨‹")]),t._v(" "),s("li",[t._v("æœ¬åœ°å†…å­˜ï¼šNIOã€JNI")])]),t._v(" "),s("h2",{attrs:{id:"äºŒã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"}},[t._v("#")]),t._v(" äºŒã€è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ")]),t._v(" "),s("p",[t._v("JVM åœ¨æ‰§è¡Œ Java ç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javacore/jvm/jvm-memory-runtime-data-area.png!zp",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"ç¨‹åºè®¡æ•°å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¨‹åºè®¡æ•°å™¨"}},[t._v("#")]),t._v(" ç¨‹åºè®¡æ•°å™¨")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰")])]),t._v(" æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯"),s("strong",[t._v("å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹é—´çš„è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸º â€œçº¿ç¨‹ç§æœ‰â€ çš„å†…å­˜ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›")]),t._v(" "),s("li",[t._v("å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šæ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ JVM ä¸­æ²¡æœ‰è§„å®šä»»ä½• "),s("code",[t._v("OutOfMemoryError")]),t._v(" æƒ…å†µçš„åŒºåŸŸã€‚")])]),t._v(" "),s("h3",{attrs:{id:"java-è™šæ‹Ÿæœºæ ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-è™šæ‹Ÿæœºæ ˆ"}},[t._v("#")]),t._v(" Java è™šæ‹Ÿæœºæ ˆ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰")])]),t._v(" ä¹Ÿ"),s("strong",[t._v("æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒ")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ¯ä¸ª Java æ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨ "),s("strong",[t._v("å±€éƒ¨å˜é‡è¡¨")]),t._v("ã€"),s("strong",[t._v("æ“ä½œæ•°æ ˆ")]),t._v("ã€"),s("strong",[t._v("å¸¸é‡æ± å¼•ç”¨")]),t._v(" ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨ Java è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆå’Œå‡ºæ ˆçš„è¿‡ç¨‹ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javacore/jvm/jvm-stack.png!w640",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼š")]),t._v(" "),s("p",[t._v("è¯¥åŒºåŸŸå¯èƒ½æŠ›å‡ºä»¥ä¸‹å¼‚å¸¸ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡æœ€å¤§å€¼ï¼Œå°±ä¼šæŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸ï¼›")]),t._v(" "),s("li",[t._v("å¦‚æœè™šæ‹Ÿæœºæ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•æ—¶ï¼Œæ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜ï¼Œå°±ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼š")]),t._v(" "),s("p",[t._v("å¯ä»¥é€šè¿‡ "),s("code",[t._v("-Xss")]),t._v(" è¿™ä¸ªè™šæ‹Ÿæœºå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªç¨‹åºçš„ Java è™šæ‹Ÿæœºæ ˆå†…å­˜å¤§å°ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("java "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xss")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HackTheJava")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"æœ¬åœ°æ–¹æ³•æ ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬åœ°æ–¹æ³•æ ˆ"}},[t._v("#")]),t._v(" æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰")])]),t._v(" ä¸è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ç›¸ä¼¼ã€‚")]),t._v(" "),s("p",[t._v("äºŒè€…çš„åŒºåˆ«åœ¨äºï¼š"),s("strong",[t._v("è™šæ‹Ÿæœºæ ˆä¸º Java æ–¹æ³•æœåŠ¡ï¼›æœ¬åœ°æ–¹æ³•æ ˆä¸º Native æ–¹æ³•æœåŠ¡")]),t._v("ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javacore/jvm/jvm-native-method-stack.gif!w640",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šæœ¬åœ°æ–¹æ³•æ ˆä¹Ÿä¼šæŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸å’Œ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"java-å †"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å †"}},[t._v("#")]),t._v(" Java å †")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("Java å †ï¼ˆJava Heapï¼‰")]),t._v(" çš„ä½œç”¨å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½æ˜¯åœ¨è¿™é‡Œåˆ†é…å†…å­˜")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v('Java å †æ˜¯åƒåœ¾æ”¶é›†çš„ä¸»è¦åŒºåŸŸï¼ˆå› æ­¤ä¹Ÿè¢«å«åš"GC å †"ï¼‰ã€‚ç°ä»£çš„åƒåœ¾æ”¶é›†å™¨åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨'),s("strong",[t._v("åˆ†ä»£æ”¶é›†ç®—æ³•")]),t._v("ï¼Œè¯¥ç®—æ³•çš„æ€æƒ³æ˜¯é’ˆå¯¹ä¸åŒçš„å¯¹è±¡é‡‡å–ä¸åŒçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚")]),t._v(" "),s("p",[t._v("å› æ­¤è™šæ‹ŸæœºæŠŠ Java å †åˆ†æˆä»¥ä¸‹ä¸‰å—ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("æ–°ç”Ÿä»£ï¼ˆYoung Generationï¼‰")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Eden")])]),t._v(" "),s("li",[s("code",[t._v("From Survivor")])]),t._v(" "),s("li",[s("code",[t._v("To Survivor")])])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("è€å¹´ä»£ï¼ˆOld Generationï¼‰")])])]),t._v(" "),s("li",[s("strong",[s("code",[t._v("æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰")])])])]),t._v(" "),s("p",[t._v("å½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒé¦–å…ˆè¿›å…¥æ–°ç”Ÿä»£ï¼Œä¹‹åæœ‰å¯èƒ½è¢«è½¬ç§»åˆ°è€å¹´ä»£ä¸­ã€‚æ–°ç”Ÿä»£å­˜æ”¾ç€å¤§é‡çš„ç”Ÿå‘½å¾ˆçŸ­çš„å¯¹è±¡ï¼Œå› æ­¤æ–°ç”Ÿä»£åœ¨ä¸‰ä¸ªåŒºåŸŸä¸­åƒåœ¾å›æ”¶çš„é¢‘ç‡æœ€é«˜ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javacore/jvm/jvm-heap.gif!w640",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šJava å †ä¸éœ€è¦è¿ç»­å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ‰©å±•å…¶å†…å­˜ï¼Œæ‰©å±•å¤±è´¥ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼šå¯ä»¥é€šè¿‡ "),s("code",[t._v("-Xms")]),t._v(" å’Œ "),s("code",[t._v("-Xmx")]),t._v(" ä¸¤ä¸ªè™šæ‹Ÿæœºå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªç¨‹åºçš„ Java å †å†…å­˜å¤§å°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®åˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°è®¾ç½®æœ€å¤§å€¼ã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("java "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xms")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Xmx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("M "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HackTheJava")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"æ–¹æ³•åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•åŒº"}},[t._v("#")]),t._v(" æ–¹æ³•åŒº")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰")]),t._v(" ç”¨äºå­˜æ”¾å·²è¢«åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¯¹è¿™å—åŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶çš„ä¸»è¦ç›®æ ‡æ˜¯å¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»çš„å¸è½½ï¼Œä½†æ˜¯ä¸€èˆ¬æ¯”è¾ƒéš¾å®ç°ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šå’Œ Java å †ä¸€æ ·ä¸éœ€è¦è¿ç»­çš„å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ‰©å±•ï¼ŒåŠ¨æ€æ‰©å±•å¤±è´¥ä¸€æ ·ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼šJDK 1.7 ä¹‹å‰ï¼ŒHotSpot è™šæ‹ŸæœºæŠŠå®ƒå½“æˆæ°¸ä¹…ä»£æ¥è¿›è¡Œåƒåœ¾å›æ”¶ï¼ŒJDK 1.8 ä¹‹åï¼Œå–æ¶ˆäº†æ°¸ä¹…ä»£ï¼Œç”¨ **"),s("code",[t._v("metaspaceï¼ˆå…ƒæ•°æ®ï¼‰")]),t._v("**åŒºæ›¿ä»£ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"è¿è¡Œæ—¶å¸¸é‡æ± "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œæ—¶å¸¸é‡æ± "}},[t._v("#")]),t._v(" è¿è¡Œæ—¶å¸¸é‡æ± ")]),t._v(" "),s("p",[s("strong",[s("code",[t._v("è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰")]),t._v(" æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†")]),t._v("ï¼ŒClass æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œ"),s("strong",[t._v("ç”¨äºå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨")]),t._v("ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¼šåœ¨ç±»åŠ è½½åè¢«æ”¾å…¥è¿™ä¸ªåŒºåŸŸã€‚")]),t._v(" "),s("p",[t._v("é™¤äº†åœ¨ç¼–è¯‘æœŸç”Ÿæˆçš„å¸¸é‡ï¼Œè¿˜å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚ "),s("code",[t._v("String")]),t._v(" ç±»çš„ "),s("code",[t._v("intern()")]),t._v("ã€‚è¿™éƒ¨åˆ†å¸¸é‡ä¹Ÿä¼šè¢«æ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ç›´æ¥å†…å­˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›´æ¥å†…å­˜"}},[t._v("#")]),t._v(" ç›´æ¥å†…å­˜")]),t._v(" "),s("p",[t._v("ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ JVM è§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚")]),t._v(" "),s("p",[t._v("åœ¨ JDK 1.4 ä¸­æ–°åŠ å…¥äº† NIO ç±»ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †é‡Œçš„ "),s("code",[t._v("DirectByteBuffer")]),t._v(" å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ğŸ”” æ³¨æ„ï¼šç›´æ¥å†…å­˜è¿™éƒ¨åˆ†ä¹Ÿè¢«é¢‘ç¹çš„ä½¿ç”¨ï¼Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡ æç¤ºï¼šç›´æ¥å†…å­˜å®¹é‡å¯é€šè¿‡ "),s("code",[t._v("-XX:MaxDirectMemorySize")]),t._v(" æŒ‡å®šï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ Java å †æœ€å¤§å€¼ï¼ˆ"),s("code",[t._v("-Xmx")]),t._v(" æŒ‡å®šï¼‰ä¸€æ ·ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"java-å†…å­˜åŒºåŸŸå¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å†…å­˜åŒºåŸŸå¯¹æ¯”"}},[t._v("#")]),t._v(" Java å†…å­˜åŒºåŸŸå¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("å†…å­˜åŒºåŸŸ")]),t._v(" "),s("th",[t._v("å†…å­˜ä½œç”¨èŒƒå›´")]),t._v(" "),s("th",[t._v("å¼‚å¸¸")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ç¨‹åºè®¡æ•°å™¨")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[t._v("æ— ")])]),t._v(" "),s("tr",[s("td",[t._v("Java è™šæ‹Ÿæœºæ ˆ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[s("code",[t._v("StackOverflowError")]),t._v(" å’Œ "),s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹ç§æœ‰")]),t._v(" "),s("td",[s("code",[t._v("StackOverflowError")]),t._v(" å’Œ "),s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("Java å †")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("æ–¹æ³•åŒº")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("è¿è¡Œæ—¶å¸¸é‡æ± ")]),t._v(" "),s("td",[t._v("çº¿ç¨‹å…±äº«")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])]),t._v(" "),s("tr",[s("td",[t._v("ç›´æ¥å†…å­˜")]),t._v(" "),s("td",[t._v("éè¿è¡Œæ—¶æ•°æ®åŒº")]),t._v(" "),s("td",[s("code",[t._v("OutOfMemoryError")])])])])]),t._v(" "),s("h2",{attrs:{id:"äºŒã€outofmemoryerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€outofmemoryerror"}},[t._v("#")]),t._v(" äºŒã€OutOfMemoryError")]),t._v(" "),s("p",[t._v("åœ¨ JVM è§„èŒƒä¸­ï¼Œ"),s("strong",[t._v("é™¤äº†ç¨‹åºè®¡æ•°å™¨åŒºåŸŸå¤–ï¼Œå…¶ä»–è¿è¡Œæ—¶åŒºåŸŸéƒ½å¯èƒ½å‘ç”Ÿ "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ï¼ˆç®€ç§° OOMï¼‰")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹é¢é€ä¸€ä»‹ç» OOM å‘ç”Ÿåœºæ™¯ã€‚")]),t._v(" "),s("h3",{attrs:{id:"java-å †æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-å †æº¢å‡º"}},[t._v("#")]),t._v(" Java å †æº¢å‡º")]),t._v(" "),s("p",[t._v("ã€ç°è±¡ã€‘Java å †ç©ºé—´ä¸è¶³æ—¶çš„é”™è¯¯ç°è±¡ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Exception in thread "main" java.lang.OutOfMemoryError: Java heap space\n')])])]),s("p",[t._v("è¿™ä¸ªé”™è¯¯æ˜¯æŒ‡ï¼šJava å †å†…å­˜å·²ç»è¾¾åˆ° "),s("code",[t._v("-Xmx")]),t._v(" è®¾ç½®çš„æœ€å¤§å€¼ã€‚Java å †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ã€‚åªè¦ä¸æ–­åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯ GC Roots åˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å…åƒåœ¾æ”¶é›†å™¨å›æ”¶è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆå½“å †ç©ºé—´åˆ°è¾¾æœ€å¤§å®¹é‡é™åˆ¶åå°±ä¼šäº§ç”Ÿ OOMã€‚")]),t._v(" "),s("p",[t._v("ã€æ’æŸ¥ã€‘")]),t._v(" "),s("p",[t._v("æ’æŸ¥é‡ç‚¹åœ¨äºï¼šåˆ¤æ–­æ˜¯ "),s("strong",[s("code",[t._v("å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰")])]),t._v(" è¿˜æ˜¯ "),s("strong",[s("code",[t._v("å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰")])]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ jstack å’Œ jmap ç”Ÿæˆ threaddump å’Œ heapdumpï¼Œç„¶åç”¨å†…å­˜åˆ†æå·¥å…·ï¼ˆå¦‚ï¼šEclipse Memory Analyzerï¼‰è¿›è¡Œåˆ†æã€‚")]),t._v(" "),s("p",[t._v("ã€å¤„ç†ã€‘")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯ä»¥è¿›ä¸€æ­¥æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ° GC Roots çš„å¯¹è±¡å¼•ç”¨é“¾ã€‚è¿™æ ·å°±èƒ½æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯æ€æ ·ä¸ GC Roots å…³è”å¹¶å¯¼è‡´ GC æ— æ³•å›æ”¶å®ƒä»¬çš„ã€‚æŒæ¡äº†è¿™äº›åŸå› ï¼Œå°±å¯ä»¥è¾ƒå‡†ç¡®çš„å®šä½å‡ºå¼•èµ·å†…å­˜æ³„æ¼çš„ä»£ç ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå³å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½å¿…é¡»å­˜æ´»ç€ï¼Œåˆ™åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ"),s("code",[t._v("-Xmx")]),t._v(" å’Œ "),s("code",[t._v("-Xms")]),t._v("ï¼‰ï¼Œä¸æœºå™¨ç‰©ç†å†…å­˜è¿›è¡Œå¯¹æ¯”ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥è°ƒå¤§ã€‚å¹¶ä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("å¯ä»¥ä½¿ç”¨ "),s("code",[t._v("-XX:+HeapDumpOnOutOfMemoryError")]),t._v(" å‚æ•°æ¥è®©è™šæ‹Ÿæœºå‡ºç° OOM çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç”Ÿæˆ dump æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è®°å½•äº†å½“å‰ Java å †çš„å¿«ç…§ä¿¡æ¯ã€‚")])]),t._v(" "),s("p",[t._v("ç¤ºä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapOOM1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OomObject")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ‰§è¡Œ "),s("code",[t._v("java -verbose:gc -Xms10M -Xmx10M -XX:+HeapDumpOnOutOfMemoryError io.github.dunwu.javacore.jvm.memory.HeapOutOfMemoryDemo")])]),t._v(" "),s("h3",{attrs:{id:"è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"}},[t._v("#")]),t._v(" è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º")]),t._v(" "),s("p",[t._v("å¯¹äº HotSpot è™šæ‹Ÿæœºæ¥è¯´ï¼Œæ ˆå®¹é‡åªç”± "),s("code",[t._v("-Xss")]),t._v(" å‚æ•°æ¥å†³å®šã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡º "),s("code",[t._v("StackOverflowError")]),t._v(" å¼‚å¸¸ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœè™šæ‹Ÿæœºåœ¨æ‰©å±•æ ˆæ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œåˆ™æŠ›å‡º "),s("code",[t._v("OutOfMemoryError")]),t._v(" å¼‚å¸¸ã€‚")])]),t._v(" "),s("p",[t._v("ä»å®æˆ˜æ¥è¯´ï¼Œæ ˆæº¢å‡ºçš„å¸¸è§åŸå› ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é€’å½’å‡½æ•°è°ƒç”¨å±‚æ•°å¤ªæ·±")]),t._v(" "),s("li",[t._v("å¤§é‡å¾ªç¯æˆ–æ­»å¾ªç¯")]),t._v(" "),s("li",[t._v("æ•°ç»„ã€Listã€Map æ•°æ®è¿‡å¤§")])]),t._v(" "),s("p",[t._v("ç¤ºä¾‹ï¼šé€’å½’å‡½æ•°è°ƒç”¨å±‚æ•°å¤ªæ·±å¯¼è‡´ "),s("code",[t._v("StackOverflowError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" stackLength "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        stackLength"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("recursion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ ˆæ·±åº¦ï¼š"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stackLength"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ç¤ºä¾‹ï¼šç±»æˆå‘˜å¾ªç¯ä¾èµ–ï¼Œå¯¼è‡´ "),s("code",[t._v("StackOverflowError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowDemo2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tvalue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tinstance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('">"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tvalue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\tinstance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('">"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"}},[t._v("#")]),t._v(" æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º")]),t._v(" "),s("p",[t._v("ã€ç°è±¡ã€‘å…ƒæ•°æ®ç©ºé—´ä¸è¶³çš„é”™è¯¯æç¤ºï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Exception in thread "main" java.lang.OutOfMemoryError: Metaspace\n')])])]),s("p",[t._v("ã€åŸå› ã€‘"),s("strong",[t._v("å…ƒæ•°æ®åŒºçš„å†…å­˜ä¸è¶³ï¼Œå³æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± çš„ç©ºé—´ä¸è¶³")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ–¹æ³•åŒºç”¨äºå­˜æ”¾ Class çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åã€è®¿é—®ä¿®é¥°ç¬¦ã€å¸¸é‡æ± ã€å­—æ®µæè¿°ã€æ–¹æ³•æè¿°ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ä¸€ä¸ªç±»è¦è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ï¼Œåˆ¤å®šæ¡ä»¶æ˜¯æ¯”è¾ƒè‹›åˆ»çš„ã€‚åœ¨ç»å¸¸åŠ¨æ€ç”Ÿæˆå¤§é‡ Class çš„åº”ç”¨ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç±»çš„å›æ”¶çŠ¶å†µã€‚è¿™ç±»å¸¸è§é™¤äº† CGLib å­—èŠ‚ç å¢å¼ºå’ŒåŠ¨æ€è¯­éŸ³æ„å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰ï¼šå¤§é‡ JSP æˆ–åŠ¨æ€äº§ç”Ÿ JSP æ–‡ä»¶çš„åº”ç”¨ï¼ˆJSP ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éœ€è¦ç¼–è¯‘ä¸º Java ç±»ï¼‰ã€åŸºäº OSGi çš„åº”ç”¨ï¼ˆå³ä½¿æ˜¯åŒä¸€ä¸ªç±»æ–‡ä»¶ï¼Œè¢«ä¸åŒçš„åŠ è½½å™¨åŠ è½½ä¹Ÿä¼šè§†ä¸ºä¸åŒçš„ç±»ï¼‰ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ã€æ’æŸ¥ã€‘å ç”¨å·²ç»è¾¾åˆ° "),s("code",[t._v("-XX:MaxMetaspaceSize")]),t._v(" è®¾ç½®çš„æœ€å¤§å€¼ï¼Œæ’æŸ¥æ€è·¯å’Œä¸Šé¢çš„ä¸€è‡´ï¼Œå‚æ•°æ–¹é¢å¯ä»¥é€šè¿‡ "),s("code",[t._v("-XX:MaxMetaspaceSize")]),t._v(" æ¥è¿›è¡Œè°ƒæ•´ã€‚")]),t._v(" "),s("p",[t._v("ã€å¤„ç†ã€‘å¦‚ä½•è°ƒæ•´å…ƒæ•°æ®ç©ºé—´ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("åœ¨ JDK6 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("-XX:PermSize")]),t._v(" å’Œ "),s("code",[t._v("-XX:MaxPermSize")]),t._v(" è®¾ç½®æ°¸ä¹…ä»£ç©ºé—´å¤§å°ï¼Œä»è€Œé™åˆ¶æ–¹æ³•åŒºå¤§å°ï¼Œå¹¶é—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("JDK8 åŠä»¥åï¼ŒJVM æ°¸ä¹…ä»£å†…å­˜æ”¹ä¸ºå…ƒæ•°æ®ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("-XX:MetaspaceSize")]),t._v(" å’Œ "),s("code",[t._v("-XX:MaxMetaspaceSize")]),t._v(" è°ƒæ•´ã€‚")])])]),t._v(" "),s("p",[t._v("ã€ç¤ºä¾‹ã€‘æ–¹æ³•åŒºå‡ºç° "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodAreaOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" enhancer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSuperclass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUseCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodInterceptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("intercept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Method")]),t._v(" method"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodProxy")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("invokeSuper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            enhancer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¯åŠ¨æ—¶æŒ‡å®šå¦‚ä¸‹ VM å‚æ•°ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("(JDK8 ä»¥å‰) - "),s("code",[t._v("-XX:PermSize=10m -XX:MaxPermSize=10m")])]),t._v(" "),s("li",[t._v("(JDK8 åŠä»¥å) - "),s("code",[t._v("-XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m")])])]),t._v(" "),s("h3",{attrs:{id:"ç›´æ¥å†…å­˜æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›´æ¥å†…å­˜æº¢å‡º"}},[t._v("#")]),t._v(" ç›´æ¥å†…å­˜æº¢å‡º")]),t._v(" "),s("p",[t._v("ç”±ç›´æ¥å†…å­˜å¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼Œä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾æ˜¯åœ¨ Head Dump æ–‡ä»¶ä¸­ä¸ä¼šçœ‹è§æ˜æ˜¾çš„å¼‚å¸¸ï¼Œå¦‚æœå‘ç° OOM ä¹‹å Dump æ–‡ä»¶å¾ˆå°ï¼Œè€Œç¨‹åºä¸­åˆç›´æ¥æˆ–é—´æ¥ä½¿ç”¨äº† NIOï¼Œå°±å¯ä»¥è€ƒè™‘æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™æ–¹é¢çš„åŸå› ã€‚")]),t._v(" "),s("p",[t._v("ç¤ºä¾‹ï¼šç›´æ¥å†…å­˜ "),s("code",[t._v("OutOfMemoryError")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DirectOutOfMemoryDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" _1MB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalAccessException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Field")]),t._v(" unsafeField "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDeclaredFields")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        unsafeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAccessible")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),t._v(" unsafe "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unsafe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsafeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            unsafe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("allocateMemory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_1MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¯åŠ¨æ—¶ï¼ŒæŒ‡å®š VM å‚æ•° "),s("code",[t._v("-Xmx20M -XX:MaxDirectMemorySize=10M")])]),t._v(" "),s("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://item.jd.com/11252778.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.douban.com/doulist/2545443/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä»è¡¨åˆ°é‡Œå­¦ä¹  JVM å®ç°"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);