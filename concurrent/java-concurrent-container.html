<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java т╣ХтЈЉт«╣тЎе | JAVACORE</title>
    <meta name="description" content="Java ТЋЎуеІ">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/javacore/favicon.ico">
    
    <link rel="preload" href="/javacore/assets/css/0.styles.e9d65cce.css" as="style"><link rel="preload" href="/javacore/assets/js/app.3de50782.js" as="script"><link rel="preload" href="/javacore/assets/js/4.13456b84.js" as="script"><link rel="preload" href="/javacore/assets/js/33.ac464a7a.js" as="script"><link rel="preload" href="/javacore/assets/js/5.65836544.js" as="script"><link rel="prefetch" href="/javacore/assets/js/10.8c899971.js"><link rel="prefetch" href="/javacore/assets/js/11.350d5fe0.js"><link rel="prefetch" href="/javacore/assets/js/12.2199728e.js"><link rel="prefetch" href="/javacore/assets/js/13.967fce6c.js"><link rel="prefetch" href="/javacore/assets/js/14.8275d0bd.js"><link rel="prefetch" href="/javacore/assets/js/15.6a09a144.js"><link rel="prefetch" href="/javacore/assets/js/16.19f02ba1.js"><link rel="prefetch" href="/javacore/assets/js/17.ed1ae7cf.js"><link rel="prefetch" href="/javacore/assets/js/18.9542df9d.js"><link rel="prefetch" href="/javacore/assets/js/19.33815bc9.js"><link rel="prefetch" href="/javacore/assets/js/20.b48a1605.js"><link rel="prefetch" href="/javacore/assets/js/21.84842e19.js"><link rel="prefetch" href="/javacore/assets/js/22.9856136d.js"><link rel="prefetch" href="/javacore/assets/js/23.078a7e69.js"><link rel="prefetch" href="/javacore/assets/js/24.8961f549.js"><link rel="prefetch" href="/javacore/assets/js/25.f5d70f7e.js"><link rel="prefetch" href="/javacore/assets/js/26.adedecef.js"><link rel="prefetch" href="/javacore/assets/js/27.f475d82e.js"><link rel="prefetch" href="/javacore/assets/js/28.3f8ad064.js"><link rel="prefetch" href="/javacore/assets/js/29.b5314d44.js"><link rel="prefetch" href="/javacore/assets/js/30.f0531d6e.js"><link rel="prefetch" href="/javacore/assets/js/31.11f77e70.js"><link rel="prefetch" href="/javacore/assets/js/32.2048c2de.js"><link rel="prefetch" href="/javacore/assets/js/34.41b97081.js"><link rel="prefetch" href="/javacore/assets/js/35.95494b37.js"><link rel="prefetch" href="/javacore/assets/js/36.9eaef114.js"><link rel="prefetch" href="/javacore/assets/js/37.3b4e6b6f.js"><link rel="prefetch" href="/javacore/assets/js/38.8599d9b0.js"><link rel="prefetch" href="/javacore/assets/js/39.143cacbc.js"><link rel="prefetch" href="/javacore/assets/js/40.d1838ae1.js"><link rel="prefetch" href="/javacore/assets/js/41.2fa20809.js"><link rel="prefetch" href="/javacore/assets/js/42.59c1ab82.js"><link rel="prefetch" href="/javacore/assets/js/43.7ef1889c.js"><link rel="prefetch" href="/javacore/assets/js/44.b0f638dd.js"><link rel="prefetch" href="/javacore/assets/js/45.7b50418b.js"><link rel="prefetch" href="/javacore/assets/js/46.e4d1c39f.js"><link rel="prefetch" href="/javacore/assets/js/47.b7cfbd0c.js"><link rel="prefetch" href="/javacore/assets/js/48.e661dc3b.js"><link rel="prefetch" href="/javacore/assets/js/49.8783fd36.js"><link rel="prefetch" href="/javacore/assets/js/50.885a9acc.js"><link rel="prefetch" href="/javacore/assets/js/51.202cb367.js"><link rel="prefetch" href="/javacore/assets/js/52.53409cde.js"><link rel="prefetch" href="/javacore/assets/js/53.400a404c.js"><link rel="prefetch" href="/javacore/assets/js/54.5410b72b.js"><link rel="prefetch" href="/javacore/assets/js/55.c904afaa.js"><link rel="prefetch" href="/javacore/assets/js/56.2b2538de.js"><link rel="prefetch" href="/javacore/assets/js/57.cae5cfaf.js"><link rel="prefetch" href="/javacore/assets/js/58.3a2e559c.js"><link rel="prefetch" href="/javacore/assets/js/59.2464138f.js"><link rel="prefetch" href="/javacore/assets/js/6.76e266d6.js"><link rel="prefetch" href="/javacore/assets/js/60.7dc4947f.js"><link rel="prefetch" href="/javacore/assets/js/61.4da8e90f.js"><link rel="prefetch" href="/javacore/assets/js/62.6c617e5b.js"><link rel="prefetch" href="/javacore/assets/js/7.477def74.js"><link rel="prefetch" href="/javacore/assets/js/8.7e86464c.js"><link rel="prefetch" href="/javacore/assets/js/9.9c34e164.js"><link rel="prefetch" href="/javacore/assets/js/vendors~flowchart.184dd07e.js"><link rel="prefetch" href="/javacore/assets/js/vendors~notification.de05f6a9.js">
    <link rel="stylesheet" href="/javacore/assets/css/0.styles.e9d65cce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javacore/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="JAVACORE" class="logo"> <span class="site-name can-hide">JAVACORE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  тЪ║уАђ
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  жФўу║Д
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  т«╣тЎе
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  т╣ХтЈЉ
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Рюе Javaу│╗тѕЌ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ­Ъј» тЇџт«б
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javacore/basics/" class="nav-link">
  тЪ║уАђ
</a></div><div class="nav-item"><a href="/javacore/advanced/" class="nav-link">
  жФўу║Д
</a></div><div class="nav-item"><a href="/javacore/container/" class="nav-link">
  т«╣тЎе
</a></div><div class="nav-item"><a href="/javacore/io/" class="nav-link">
  IO
</a></div><div class="nav-item"><a href="/javacore/concurrent/" class="nav-link router-link-active">
  т╣ХтЈЉ
</a></div><div class="nav-item"><a href="/javacore/jvm/" class="nav-link">
  JVM
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Рюе Javaу│╗тѕЌ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot ТЋЎуеІ ­ЪЊџ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ­Ъј» тЇџт«б
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javacore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java т╣ХтЈЉт«╣тЎе</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javacore/concurrent/java-concurrent-container.html#СИђсђЂтљїТГЦт«╣тЎе" class="sidebar-link">СИђсђЂтљїТГЦт«╣тЎе</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#тљїТГЦт«╣тЎеу«ђС╗І" class="sidebar-link">тљїТГЦт«╣тЎеу«ђС╗І</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#тљїТГЦт«╣тЎеуџёжЌ«жбў" class="sidebar-link">тљїТГЦт«╣тЎеуџёжЌ«жбў</a></li></ul></li><li><a href="/javacore/concurrent/java-concurrent-container.html#С║їсђЂт╣ХтЈЉт«╣тЎеу«ђС╗І" class="sidebar-link">С║їсђЂт╣ХтЈЉт«╣тЎеу«ђС╗І</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javacore/concurrent/java-concurrent-container.html#concurrenthashmap" class="sidebar-link">ConcurrentHashMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#concurrenthashmap-уџёуЅ╣ТђД" class="sidebar-link">ConcurrentHashMap уџёуЅ╣ТђД</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#concurrenthashmap-уџёућеТ│Ћ" class="sidebar-link">ConcurrentHashMap уџёућеТ│Ћ</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#concurrenthashmap-уџётјЪуљє" class="sidebar-link">ConcurrentHashMap уџётјЪуљє</a></li></ul></li><li><a href="/javacore/concurrent/java-concurrent-container.html#copyonwritearraylist" class="sidebar-link">CopyOnWriteArrayList</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#УдЂуѓ╣" class="sidebar-link">УдЂуѓ╣</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#Т║љуаЂ" class="sidebar-link">Т║љуаЂ</a></li><li class="sidebar-sub-header"><a href="/javacore/concurrent/java-concurrent-container.html#уц║СЙІ" class="sidebar-link">уц║СЙІ</a></li></ul></li><li><a href="/javacore/concurrent/java-concurrent-container.html#тЈѓУђЃУхёТќЎ" class="sidebar-link">тЈѓУђЃУхёТќЎ</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-т╣ХтЈЉт«╣тЎе"><a href="#java-т╣ХтЈЉт«╣тЎе" class="header-anchor">#</a> Java т╣ХтЈЉт«╣тЎе</h1> <blockquote><p><strong>­ЪЊд ТюгТќЄС╗ЦтЈіуц║СЙІТ║љуаЂти▓тйњТАБтюе <a href="https://github.com/dunwu/javacore/" target="_blank" rel="noopener noreferrer">javacore<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p></blockquote> <h2 id="СИђсђЂтљїТГЦт«╣тЎе"><a href="#СИђсђЂтљїТГЦт«╣тЎе" class="header-anchor">#</a> СИђсђЂтљїТГЦт«╣тЎе</h2> <h3 id="тљїТГЦт«╣тЎеу«ђС╗І"><a href="#тљїТГЦт«╣тЎеу«ђС╗І" class="header-anchor">#</a> тљїТГЦт«╣тЎеу«ђС╗І</h3> <p>тюе Java СИГ№╝їтљїТГЦт«╣тЎеСИ╗УдЂтїЁТІг 2 у▒╗№╝џ</p> <ul><li><code>Vector</code>сђЂ<code>Stack</code>сђЂ<code>Hashtable</code> <ul><li><code>Vector</code> - <code>Vector</code> т«ъуј░С║є <code>List</code> ТјЦтЈБсђѓ<code>Vector</code> т«ъжЎЁСИіт░▒Тў»СИђСИфТЋ░у╗ё№╝їтњї <code>ArrayList</code> у▒╗С╝╝сђѓСйєТў» <code>Vector</code> СИГуџёТќ╣Т│ЋжЃйТў» <code>synchronized</code> Тќ╣Т│Ћ№╝їтЇ│У┐ЏУАїС║єтљїТГЦТјфТќйсђѓ</li> <li><code>Stack</code> - <code>Stack</code> С╣ЪТў»СИђСИфтљїТГЦт«╣тЎе№╝їт«ЃуџёТќ╣Т│ЋС╣Ъуће <code>synchronized</code> У┐ЏУАїС║єтљїТГЦ№╝їт«Ѓт«ъжЎЁСИіТў»у╗ДТЅ┐С║ј <code>Vector</code> у▒╗сђѓ</li> <li><code>Hashtable</code>- <code>Hashtable</code> т«ъуј░С║є <code>Map</code> ТјЦтЈБ№╝їт«Ѓтњї <code>HashMap</code> тЙѕуЏИС╝╝№╝їСйєТў» <code>Hashtable</code> У┐ЏУАїС║єтљїТГЦтцёуљє№╝їУђї <code>HashMap</code> Т▓АТюЅсђѓ</li></ul></li> <li><code>Collections</code> у▒╗СИГТЈљСЙЏуџёжЮЎТђЂтиЦтјѓТќ╣Т│ЋтѕЏт╗║уџёу▒╗№╝ѕућ▒ <code>Collections.synchronizedXXX</code> уГЅТќ╣Т│Ћ№╝Ѕ</li></ul> <h3 id="тљїТГЦт«╣тЎеуџёжЌ«жбў"><a href="#тљїТГЦт«╣тЎеуџёжЌ«жбў" class="header-anchor">#</a> тљїТГЦт«╣тЎеуџёжЌ«жбў</h3> <p>тљїТГЦт«╣тЎеуџётљїТГЦтјЪуљєт░▒Тў»тюеТќ╣Т│ЋСИіуће <code>synchronized</code> С┐«жЦ░сђѓ <strong><code>synchronized</code> тЈ»С╗ЦС┐ЮУ»ЂтюетљїСИђСИфТЌХтѕ╗№╝їтЈфТюЅСИђСИфу║┐уеІтЈ»С╗ЦТЅДУАїТЪљСИфТќ╣Т│ЋТѕќУђЁТЪљСИфС╗БуаЂтЮЌ</strong>сђѓ</p> <blockquote><p>ТЃ│У»ду╗єС║єУДБ <code>synchronized</code> ућеТ│ЋтњїтјЪуљєтЈ»С╗ЦтЈѓУђЃ№╝џ<a href="https://github.com/dunwu/javacore/blob/master/docs/concurrent/java-concurrent-basic-mechanism.md#%E4%BA%8Csynchronized" target="_blank" rel="noopener noreferrer">Java т╣ХтЈЉТаИт┐ЃТю║тѕХ - synchronized<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h4 id="ТђДУЃйжЌ«жбў"><a href="#ТђДУЃйжЌ«жбў" class="header-anchor">#</a> ТђДУЃйжЌ«жбў</h4> <p><code>synchronized</code> уџёС║њТќЦтљїТГЦС╝џС║ДућЪжў╗тАътњїтћцжєњу║┐уеІуџёт╝ђжћђсђѓТўЙуёХ№╝їУ┐ЎуДЇТќ╣т╝ЈТ»ћТ▓АТюЅСй┐уће <code>synchronized</code> уџёт«╣тЎеТђДУЃйУдЂти«сђѓ</p> <h4 id="т«ЅтЁежЌ«жбў"><a href="#т«ЅтЁежЌ«жбў" class="header-anchor">#</a> т«ЅтЁежЌ«жбў</h4> <p>тљїТГЦт«╣тЎеуюЪуџёу╗Ют»╣т«ЅтЁетљЌ№╝Ъ</p> <p>тЁХт«ъС╣ЪТюфт┐ЁсђѓтюетЂџтцЇтљѕТЊЇСйю№╝ѕжЮътјЪтГљТЊЇСйю№╝ЅТЌХ№╝їС╗ЇуёХжюђУдЂтіажћЂТЮЦС┐ЮТіцсђѓтИИУДЂтцЇтљѕТЊЇСйютдѓСИІ№╝џ</p> <ul><li><strong>У┐ГС╗Б</strong>№╝џтЈЇтцЇУ«┐жЌ«тЁЃу┤а№╝їуЏ┤тѕ░жЂЇтјєт«їтЁежЃетЁЃу┤а№╝Џ</li> <li><strong>Уи│Уйг</strong>№╝џТа╣ТЇ«ТїЄт«џжА║т║Јт»╗ТЅЙтйЊтЅЇтЁЃу┤ауџёСИІСИђСИф№╝ѕСИІ n СИф№╝ЅтЁЃу┤а№╝Џ</li> <li><strong>ТЮАС╗ХУ┐љу«Ќ</strong>№╝џСЙІтдѓУІЦТ▓АТюЅтѕЎТи╗тіауГЅ№╝Џ</li></ul> <p>РЮї СИЇт«ЅтЁеуџёуц║СЙІ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VectorDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> vector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            vector<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                vector<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        vector<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        vector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">activeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;тљїТЌХтГўтюе 10 СИфС╗ЦСИіу║┐уеІ№╝їжђђтЄ║&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>С╗ЦСИіуеІт║ЈТЅДУАїТЌХтЈ»УЃйС╝џтЄ║уј░ТЋ░у╗ёУХіуЋїжћЎУ»»сђѓ</p> <p><code>Vector</code> Тў»у║┐уеІт«ЅтЁеуџё№╝їжѓБСИ║С╗ђС╣ѕУ┐ўС╝џТіЦУ┐ЎСИфжћЎ№╝Ъ</p> <p>У┐ЎТў»тЏаСИ║№╝їт»╣С║ј Vector№╝їУЎйуёХУЃйС┐ЮУ»ЂТ»ЈСИђСИфТЌХтѕ╗тЈфУЃйТюЅСИђСИфу║┐уеІУ«┐жЌ«т«Ѓ№╝їСйєТў»СИЇТјњжЎцУ┐ЎуДЇтЈ»УЃй№╝џ</p> <p>тйЊТЪљСИфу║┐уеІтюеТЪљСИфТЌХтѕ╗ТЅДУАїУ┐ЎтЈЦТЌХ№╝џ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    vector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>тЂЄУІЦТГцТЌХ vector уџё size Тќ╣Т│ЋУ┐ћтЏъуџёТў» 10№╝їi уџётђ╝СИ║ 9</p> <p>уёХтљјтЈдтцќСИђСИфу║┐уеІТЅДУАїС║єУ┐ЎтЈЦ№╝џ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
    vector<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>т░єСИІТаЄСИ║ 9 уџётЁЃу┤атѕажЎцС║єсђѓ</p> <p>жѓБС╣ѕжђџУ┐Є get Тќ╣Т│ЋУ«┐жЌ«СИІТаЄСИ║ 9 уџётЁЃу┤аУѓ»т«џт░▒С╝џтЄ║жЌ«жбўС║єсђѓ</p> <p>Рюћ т«ЅтЁеуц║СЙІ</p> <p>тЏаТГцСИ║С║єС┐ЮУ»Ђу║┐уеІт«ЅтЁе№╝їт┐ЁжА╗тюеТќ╣Т│ЋУ░ЃућеуФ»тЂџжбЮтцќуџётљїТГЦТјфТќй№╝їтдѓСИІжЮбТЅђуц║№╝џ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VectorDemo2</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> vector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                vector<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">VectorDemo2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//У┐ЏУАїжбЮтцќуџётљїТГЦ</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            vector<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">VectorDemo2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vector<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            vector<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">activeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;тљїТЌХтГўтюе 10 СИфС╗ЦСИіу║┐уеІ№╝їжђђтЄ║&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><code>ConcurrentModificationException</code> т╝ѓтИИ</p> <p>тюет»╣ Vector уГЅт«╣тЎет╣ХтЈЉтю░У┐ЏУАїУ┐ГС╗БС┐«Тћ╣ТЌХ№╝їС╝џТіЦ <code>ConcurrentModificationException</code> т╝ѓтИИ№╝їтЁ│С║јУ┐ЎСИфт╝ѓтИИт░єС╝џтюетљју╗ГТќЄуФаСИГУ«▓У┐░сђѓ</p> <p>СйєТў»тюет╣ХтЈЉт«╣тЎеСИГСИЇС╝џтЄ║уј░У┐ЎСИфжЌ«жбўсђѓ</p> <h2 id="С║їсђЂт╣ХтЈЉт«╣тЎеу«ђС╗І"><a href="#С║їсђЂт╣ХтЈЉт«╣тЎеу«ђС╗І" class="header-anchor">#</a> С║їсђЂт╣ХтЈЉт«╣тЎеу«ђС╗І</h2> <blockquote><p>тљїТГЦт«╣тЎет░єТЅђТюЅт»╣т«╣тЎеуіХТђЂуџёУ«┐жЌ«жЃйСИ▓УАїтїќ№╝їС╗ЦС┐ЮУ»Ђу║┐уеІт«ЅтЁеТђД№╝їУ┐ЎуДЇуГќуЋЦС╝џСИЦжЄЇжЎЇСйјт╣ХтЈЉТђДсђѓ</p> <p>Java 1.5 тљјТЈљСЙЏС║єтцџуДЇт╣ХтЈЉт«╣тЎе№╝ї<strong>Сй┐ућет╣ХтЈЉт«╣тЎеТЮЦТЏ┐С╗БтљїТГЦт«╣тЎе№╝їтЈ»С╗ЦТъЂтцДтю░ТЈљжФўС╝Иу╝ЕТђДт╣ХжЎЇСйјжБјжЎЕ</strong>сђѓ</p></blockquote> <p>J.U.C тїЁСИГТЈљСЙЏС║єтЄаСИфжЮътИИТюЅућеуџёт╣ХтЈЉт«╣тЎеСйюСИ║у║┐уеІт«ЅтЁеуџёт«╣тЎе№╝џ</p> <table><thead><tr><th>т╣ХтЈЉт«╣тЎе</th> <th>т»╣т║ћуџёТЎ«жђџт«╣тЎе</th> <th>ТЈЈУ┐░</th></tr></thead> <tbody><tr><td><code>ConcurrentHashMap</code></td> <td><code>HashMap</code></td> <td>Java 1.8 С╣ІтЅЇжЄЄућетѕєТ«хжћЂТю║тѕХу╗єтїќжћЂу▓њт║д№╝їжЎЇСйјжў╗тАъ№╝їС╗јУђїТЈљжФўт╣ХтЈЉТђД№╝ЏJava 1.8 С╣ІтљјтЪ║С║ј CAS т«ъуј░сђѓ</td></tr> <tr><td><code>ConcurrentSkipListMap</code></td> <td><code>SortedMap</code></td> <td>тЪ║С║јУи│УАет«ъуј░уџё</td></tr> <tr><td><code>CopyOnWriteArrayList</code></td> <td><code>ArrayList</code></td> <td></td></tr> <tr><td><code>CopyOnWriteArraySet</code></td> <td><code>Set</code></td> <td>тЪ║С║ј <code>CopyOnWriteArrayList</code> т«ъуј░сђѓ</td></tr> <tr><td><code>ConcurrentSkipListSet</code></td> <td><code>SortedSet</code></td> <td>тЪ║С║ј <code>ConcurrentSkipListMap</code> т«ъуј░сђѓ</td></tr> <tr><td><code>ConcurrentLinkedQueue</code></td> <td><code>Queue</code></td> <td>у║┐уеІт«ЅтЁеуџёТЌауЋїжўЪтѕЌсђѓт║Ћт▒ѓжЄЄућетЇЋжЊЙУАесђѓТћ»ТїЂ FIFOсђѓ</td></tr> <tr><td><code>ConcurrentLinkedDeque</code></td> <td><code>Deque</code></td> <td>у║┐уеІт«ЅтЁеуџёТЌауЋїтЈїуФ»жўЪтѕЌсђѓт║Ћт▒ѓжЄЄућетЈїтљЉжЊЙУАесђѓТћ»ТїЂ FIFO тњї FILOсђѓ</td></tr> <tr><td><code>ArrayBlockingQueue</code></td> <td><code>Queue</code></td> <td>ТЋ░у╗ёт«ъуј░уџёжў╗тАъжўЪтѕЌсђѓ</td></tr> <tr><td><code>LinkedBlockingQueue</code></td> <td><code>Queue</code></td> <td>жЊЙУАет«ъуј░уџёжў╗тАъжўЪтѕЌсђѓ</td></tr> <tr><td><code>LinkedBlockingDeque</code></td> <td><code>Deque</code></td> <td>тЈїтљЉжЊЙУАет«ъуј░уџётЈїуФ»жў╗тАъжўЪтѕЌсђѓ</td></tr></tbody></table> <h2 id="concurrenthashmap"><a href="#concurrenthashmap" class="header-anchor">#</a> ConcurrentHashMap</h2> <blockquote><p><code>ConcurrentHashMap</code> Тў»у║┐уеІт«ЅтЁеуџё <code>HashMap</code> №╝їућеС║јТЏ┐С╗Б <code>Hashtable</code>сђѓ</p></blockquote> <h3 id="concurrenthashmap-уџёуЅ╣ТђД"><a href="#concurrenthashmap-уџёуЅ╣ТђД" class="header-anchor">#</a> ConcurrentHashMap уџёуЅ╣ТђД</h3> <p><code>ConcurrentHashMap</code> т«ъуј░С║є <code>ConcurrentMap</code> ТјЦтЈБ№╝їУђї <code>ConcurrentMap</code> ТјЦтЈБТЅЕт▒ЋС║є <code>Map</code> ТјЦтЈБсђѓ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">implements</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ConcurrentHashMap</code> уџёт«ъуј░тїЁтљФС║є <code>HashMap</code> ТЅђТюЅуџётЪ║ТюгуЅ╣ТђД№╝їтдѓ№╝џТЋ░ТЇ«у╗ЊТъёсђЂУ»╗тєЎуГќуЋЦуГЅсђѓ</p> <p><code>ConcurrentHashMap</code> Т▓АТюЅт«ъуј░т»╣ <code>Map</code> тіажћЂС╗ЦТЈљСЙЏуІгтЇаУ«┐жЌ«сђѓтЏаТГцТЌаТ│ЋжђџУ┐Єтюет«бТѕиуФ»тіажћЂуџёТќ╣т╝ЈТЮЦтѕЏт╗║Тќ░уџётјЪтГљТЊЇСйюсђѓСйєТў»№╝їСИђС║ЏтИИУДЂуџётцЇтљѕТЊЇСйю№╝їтдѓ№╝џРђюУІЦТ▓АТюЅтѕЎТи╗тіаРђЮсђЂРђюУІЦуЏИуГЅтѕЎуД╗жЎцРђЮсђЂРђюУІЦуЏИуГЅтѕЎТЏ┐ТЇбРђЮ№╝їжЃйти▓у╗Јт«ъуј░СИ║тјЪтГљТЊЇСйю№╝їт╣ХСИћТў»тЏ┤у╗Ћ <code>ConcurrentMap</code> уџёТЅЕт▒ЋТјЦтЈБУђїт«ъуј░сђѓ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">// С╗ЁтйЊ K Т▓АТюЅуЏИт║ћуџёТўат░ётђ╝ТЅЇТЈњтЁЦ</span>
    <span class="token class-name">V</span> <span class="token function">putIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// С╗ЁтйЊ K УбФТўат░ётѕ░ V ТЌХТЅЇуД╗жЎц</span>
    <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// С╗ЁтйЊ K УбФТўат░ётѕ░ oldValue ТЌХТЅЇТЏ┐ТЇбСИ║ newValue</span>
    <span class="token keyword">boolean</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> oldValue<span class="token punctuation">,</span> <span class="token class-name">V</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// С╗ЁтйЊ K УбФТўат░ётѕ░ТЪљСИфтђ╝ТЌХТЅЇТЏ┐ТЇбСИ║ newValue</span>
    <span class="token class-name">V</span> <span class="token function">replace</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>СИЇтљїС║ј <code>Hashtable</code>№╝ї<code>ConcurrentHashMap</code> ТЈљСЙЏуџёУ┐ГС╗БтЎеСИЇС╝џТіЏтЄ║ <code>ConcurrentModificationException</code>№╝їтЏаТГцСИЇжюђУдЂтюеУ┐ГС╗БУ┐ЄуеІСИГт»╣т«╣тЎетіажћЂсђѓ</p> <blockquote><p>­Ъћћ Т│еТёЈ№╝џСИђС║ЏжюђУдЂт»╣ТЋ┤СИф <code>Map</code> У┐ЏУАїУ«Ау«ЌуџёТќ╣Т│Ћ№╝їтдѓ <code>size</code> тњї <code>isEmpty</code> №╝їућ▒С║јУ┐ћтЏъуџёу╗ЊТъютюеУ«Ау«ЌТЌХтЈ»УЃйти▓у╗ЈУ┐ЄТюЪ№╝їТЅђС╗Ц<strong>т╣ХжЮът«ъТЌХуџёу▓ЙуА«тђ╝</strong>сђѓУ┐ЎТў»СИђуДЇуГќуЋЦСИіуџёТЮЃУАА№╝їтюет╣ХтЈЉуј»тбЃСИІ№╝їУ┐Ўу▒╗Тќ╣Т│Ћућ▒С║јТђ╗тюеСИЇТќГтЈўтїќ№╝їТЅђС╗ЦУјитЈќтЁХт«ъТЌХу▓ЙуА«тђ╝уџёТёЈС╣ЅСИЇтцДсђѓ<code>ConcurrentHashMap</code> т╝▒тїќУ┐Ўу▒╗Тќ╣Т│Ћ№╝їС╗ЦТЇбтЈќТЏ┤жЄЇУдЂТЊЇСйю№╝ѕтдѓ№╝џ<code>get</code>сђЂ<code>put</code>сђЂ<code>containesKey</code>сђЂ<code>remove</code> уГЅ№╝ЅуџёТђДУЃйсђѓ</p></blockquote> <h3 id="concurrenthashmap-уџёућеТ│Ћ"><a href="#concurrenthashmap-уџёућеТ│Ћ" class="header-anchor">#</a> ConcurrentHashMap уџёућеТ│Ћ</h3> <p>уц║СЙІ№╝џСИЇС╝џтЄ║уј░ <code>ConcurrentModificationException</code></p> <p><code>ConcurrentHashMap</code> уџётЪ║ТюгТЊЇСйюСИј <code>HashMap</code> уџёућеТ│ЋтЪ║ТюгСИђТаисђѓСИЇтљїС║ј <code>HashMap</code>сђЂ<code>Hashtable</code>№╝ї<code>ConcurrentHashMap</code> ТЈљСЙЏуџёУ┐ГС╗БтЎеСИЇС╝џТіЏтЄ║ <code>ConcurrentModificationException</code>№╝їтЏаТГцСИЇжюђУдЂтюеУ┐ГС╗БУ┐ЄуеІСИГт»╣т«╣тЎетіажћЂсђѓ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcurrentHashMapDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token comment">// HashMap тюет╣ХтЈЉУ┐ГС╗БУ«┐жЌ«ТЌХС╝џТіЏтЄ║ ConcurrentModificationException т╝ѓтИИ</span>
        <span class="token comment">// Map&lt;Integer, Character&gt; map = new HashMap&lt;&gt;();</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> wthread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;тєЎТЊЇСйюу║┐уеІт╝ђтДІТЅДУАї&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> rthread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;У»╗ТЊЇСйюу║┐уеІт╝ђтДІТЅДУАї&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span> key <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        wthread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rthread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="concurrenthashmap-уџётјЪуљє"><a href="#concurrenthashmap-уџётјЪуљє" class="header-anchor">#</a> ConcurrentHashMap уџётјЪуљє</h3> <p><code>ConcurrentHashMap</code> тюе Java 1.8 С╣ІтЅЇтњї Java 1.8 С╣Ітљјуџёт«ъуј░ТюЅтЙѕтцДти«т╝ѓ№╝џ</p> <ul><li>Java 1.8 С╣ІтЅЇжЄЄућетѕєТ«хжћЂТю║тѕХу╗єтїќжћЂу▓њт║д№╝їжЎЇСйјжў╗тАъ№╝їС╗јУђїТЈљжФўт╣ХтЈЉТђДсђѓ</li> <li>Java 1.8 С╣ІтљјтЪ║С║ј CAS т«ъуј░сђѓ</li></ul> <h4 id="java-1-7-уџёт«ъуј░"><a href="#java-1-7-уџёт«ъуј░" class="header-anchor">#</a> Java 1.7 уџёт«ъуј░</h4> <h5 id="ТЋ░ТЇ«у╗ЊТъё"><a href="#ТЋ░ТЇ«у╗ЊТъё" class="header-anchor">#</a> ТЋ░ТЇ«у╗ЊТъё</h5> <p>Т»ЈСИђСИф segment жЃйТў»СИђСИф HashEntry&lt;K,V&gt;[] table№╝ї table СИГуџёТ»ЈСИђСИфтЁЃу┤аТюгУ┤еСИіжЃйТў»СИђСИф HashEntry уџётЇЋтљЉжўЪтѕЌсђѓТ»ћтдѓ table[3]СИ║ждќУіѓуѓ╣№╝їtable[3]-&gt;next СИ║Уіѓуѓ╣ 1№╝їС╣ІтљјСИ║Уіѓуѓ╣ 2№╝їСЙЮТгАу▒╗Тјесђѓ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">// т░єТЋ┤СИфhashmapтѕєТѕљтЄаСИфт░Јуџёmap№╝їТ»ЈСИфsegmentжЃйТў»СИђСИфжћЂ№╝ЏСИјhashtableуЏИТ»ћ№╝їУ┐ЎС╣ѕУ«ЙУ«АуџёуЏ«уџёТў»т»╣С║јput, removeуГЅТЊЇСйю№╝їтЈ»С╗ЦтЄЈт░Љт╣ХтЈЉтє▓уфЂ№╝їт»╣</span>
    <span class="token comment">// СИЇт▒ъС║јтљїСИђСИфуЅЄТ«хуџёУіѓуѓ╣тЈ»С╗Цт╣ХтЈЉТЊЇСйю№╝їтцДтцДТЈљжФўС║єТђДУЃй</span>
    <span class="token keyword">final</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> segments<span class="token punctuation">;</span>

    <span class="token comment">// ТюгУ┤еСИіSegmentу▒╗т░▒Тў»СИђСИфт░Јуџёhashmap№╝їжЄїжЮбtableТЋ░у╗ётГўтѓеС║єтљёСИфУіѓуѓ╣уџёТЋ░ТЇ«№╝їу╗ДТЅ┐С║єReentrantLock, тЈ»С╗ЦСйюСИ║С║њТІєжћЂСй┐уће</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Segment</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">ReentrantLock</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
        <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> table<span class="token punctuation">;</span>
        <span class="token keyword">transient</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// тЪ║ТюгУіѓуѓ╣№╝їтГўтѓеKey№╝ї Valueтђ╝</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> hash<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
        <span class="token keyword">volatile</span> <span class="token class-name">V</span> value<span class="token punctuation">;</span>
        <span class="token keyword">volatile</span> <span class="token class-name">HashEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="java-1-8-уџёт«ъуј░"><a href="#java-1-8-уџёт«ъуј░" class="header-anchor">#</a> Java 1.8 уџёт«ъуј░</h4> <ul><li>jdk8 СИГСИ╗УдЂтЂџС║є 2 Тќ╣жЮбуџёТћ╣У┐Џ</li> <li>тЈќТХѕ segments тГЌТ«х№╝їуЏ┤ТјЦжЄЄуће <code>transient volatile HashEntry&lt;K,V&gt;[] table</code> С┐ЮтГўТЋ░ТЇ«№╝їжЄЄуће table ТЋ░у╗ётЁЃу┤аСйюСИ║жћЂ№╝їС╗јУђїт«ъуј░С║єт»╣Т»ЈСИђУАїТЋ░ТЇ«У┐ЏУАїтіажћЂ№╝їУ┐ЏСИђТГЦтЄЈт░Љт╣ХтЈЉтє▓уфЂуџёТдѓујЄсђѓ</li> <li>т░єтјЪтЁѕ table ТЋ░у╗ё№╝ІтЇЋтљЉжЊЙУАеуџёТЋ░ТЇ«у╗ЊТъё№╝їтЈўТЏ┤СИ║ table ТЋ░у╗ё№╝ІтЇЋтљЉжЊЙУАе№╝Іу║бж╗ЉТаЉуџёу╗ЊТъёсђѓт»╣С║ј hash УАеТЮЦУ»┤№╝їТюђТаИт┐ЃуџёУЃйтіЏтюеС║јт░є key hash С╣ІтљјУЃйтЮЄтїђуџётѕєтИЃтюеТЋ░у╗ёСИГсђѓтдѓТъю hash С╣ІтљјТЋБтѕЌуџётЙѕтЮЄтїђ№╝їжѓБС╣ѕ table ТЋ░у╗ёСИГуџёТ»ЈСИфжўЪтѕЌжЋ┐т║дСИ╗УдЂСИ║ 0 ТѕќУђЁ 1сђѓСйєт«ъжЎЁТЃЁтєхт╣ХжЮъТђ╗Тў»тдѓТГцуљєТЃ│№╝їУЎйуёХ ConcurrentHashMap у▒╗ж╗ўУ«цуџётіаУййтЏатГљСИ║ 0.75№╝їСйєТў»тюеТЋ░ТЇ«жЄЈУ┐ЄтцДТѕќУђЁУ┐љТ░ћСИЇСй│уџёТЃЁтєхСИІ№╝їУ┐ўТў»С╝џтГўтюеСИђС║ЏжўЪтѕЌжЋ┐т║дУ┐ЄжЋ┐уџёТЃЁтєх№╝їтдѓТъюУ┐ўТў»жЄЄућетЇЋтљЉтѕЌУАеТќ╣т╝Ј№╝їжѓБС╣ѕТЪЦУ»бТЪљСИфУіѓуѓ╣уџёТЌХжЌ┤тцЇТЮѓт║дСИ║ O(n)№╝ЏтЏаТГц№╝їт»╣С║јСИфТЋ░УХЁУ┐Є 8(ж╗ўУ«цтђ╝)уџётѕЌУАе№╝їjdk1.8 СИГжЄЄућеС║єу║бж╗ЉТаЉуџёу╗ЊТъё№╝їжѓБС╣ѕТЪЦУ»буџёТЌХжЌ┤тцЇТЮѓт║дтЈ»С╗ЦжЎЇСйјтѕ░ O(logN)№╝їтЈ»С╗ЦТћ╣У┐ЏТђДУЃйсђѓ</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> hash <span class="token operator">=</span> <span class="token function">spread</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab <span class="token operator">=</span> table<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> fh<span class="token punctuation">;</span>
        <span class="token comment">// тдѓТъюtableСИ║уЕ║№╝їтѕЮтДІтїќ№╝ЏтљдтѕЎ№╝їТа╣ТЇ«hashтђ╝У«Ау«ЌтЙЌтѕ░ТЋ░у╗ёу┤бт╝Ћi№╝їтдѓТъюtab[i]СИ║уЕ║№╝їуЏ┤ТјЦТќ░т╗║Уіѓуѓ╣NodeтЇ│тЈ»сђѓТ│е№╝џtab[i]т«ъУ┤еСИ║жЊЙУАеТѕќУђЁу║бж╗ЉТаЉуџёждќУіѓуѓ╣сђѓ</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            tab <span class="token operator">=</span> <span class="token function">initTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>f <span class="token operator">=</span> <span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">casTabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                         <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>                   <span class="token comment">// no lock when adding to empty bin</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// тдѓТъюtab[i]СИЇСИ║уЕ║т╣ХСИћhashтђ╝СИ║MOVED№╝їУ»┤ТўјУ»ЦжЊЙУАеТГБтюеУ┐ЏУАїtransferТЊЇСйю№╝їУ┐ћтЏъТЅЕт«╣т«їТѕљтљјуџёtableсђѓ</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>fh <span class="token operator">=</span> f<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token operator">==</span> MOVED<span class="token punctuation">)</span>
            tab <span class="token operator">=</span> <span class="token function">helpTransfer</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">V</span> oldVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token comment">// жњѕт»╣ждќСИфУіѓуѓ╣У┐ЏУАїтіажћЂТЊЇСйю№╝їУђїСИЇТў»segment№╝їУ┐ЏСИђТГЦтЄЈт░Љу║┐уеІтє▓уфЂ</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">tabAt</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">==</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>fh <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        binCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e <span class="token operator">=</span> f<span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token class-name">K</span> ek<span class="token punctuation">;</span>
                            <span class="token comment">// тдѓТъютюежЊЙУАеСИГТЅЙтѕ░тђ╝СИ║keyуџёУіѓуѓ╣e№╝їуЏ┤ТјЦУ«Йуй«e.val = valueтЇ│тЈ»сђѓ</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
                                <span class="token punctuation">(</span><span class="token punctuation">(</span>ek <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span>
                                 <span class="token punctuation">(</span>ek <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ek<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                oldVal <span class="token operator">=</span> e<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                    e<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token comment">// тдѓТъюТ▓АТюЅТЅЙтѕ░тђ╝СИ║keyуџёУіѓуѓ╣№╝їуЏ┤ТјЦТќ░т╗║Nodeт╣ХтіатЁЦжЊЙУАетЇ│тЈ»сђѓ</span>
                            <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> e<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                pred<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                                                          value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// тдѓТъюждќУіѓуѓ╣СИ║TreeBinу▒╗тъІ№╝їУ»┤ТўјСИ║у║бж╗ЉТаЉу╗ЊТъё№╝їТЅДУАїputTreeValТЊЇСйюсђѓ</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">TreeBin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">;</span>
                        binCount <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeBin</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>f<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                                                       value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            oldVal <span class="token operator">=</span> p<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent<span class="token punctuation">)</span>
                                p<span class="token punctuation">.</span>val <span class="token operator">=</span> value<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// тдѓТъюУіѓуѓ╣ТЋ░&gt;№╝Ю8№╝їжѓБС╣ѕУйгТЇбжЊЙУАеу╗ЊТъёСИ║у║бж╗ЉТаЉу╗ЊТъёсђѓ</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">&gt;=</span> TREEIFY_THRESHOLD<span class="token punctuation">)</span>
                    <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVal <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// У«АТЋ░тбътіа1№╝їТюЅтЈ»УЃйУДдтЈЉtransferТЊЇСйю(ТЅЕт«╣)сђѓ</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> binCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="copyonwritearraylist"><a href="#copyonwritearraylist" class="header-anchor">#</a> CopyOnWriteArrayList</h2> <h3 id="УдЂуѓ╣"><a href="#УдЂуѓ╣" class="header-anchor">#</a> УдЂуѓ╣</h3> <ul><li>Сйюуће№╝џCopyOnWrite тГЌжЮбТёЈТђЮСИ║тєЎтЁЦТЌХтцЇтѕХсђѓCopyOnWriteArrayList Тў»у║┐уеІт«ЅтЁеуџё ArrayListсђѓ</li> <li>тјЪуљє№╝џ
<ul><li>тюе CopyOnWriteAarrayList СИГ№╝їУ»╗ТЊЇСйюСИЇтљїТГЦ№╝їтЏаСИ║т«ЃС╗гтюетєЁжЃеТЋ░у╗ёуџёт┐ФуЁДСИітиЦСйю№╝їТЅђС╗ЦтцџСИфУ┐ГС╗БтЎетЈ»С╗ЦтљїТЌХжЂЇтјєУђїСИЇС╝џуЏИС║њжў╗тАъ№╝ѕ1,2,4№╝Ѕсђѓ</li> <li>ТЅђТюЅуџётєЎТЊЇСйюжЃйТў»тљїТГЦуџёсђѓС╗ќС╗гтюетцЄС╗йТЋ░у╗ё№╝ѕ3№╝ЅуџётЅ»ТюгСИітиЦСйюсђѓтєЎТЊЇСйют«їТѕљтљј№╝їтљјтцЄжўхтѕЌт░єУбФТЏ┐ТЇбСИ║тцЇтѕХуџёжўхтѕЌ№╝їт╣ХжЄіТћЙжћЂт«џсђѓТћ»ТїЂТЋ░у╗ётЈўтЙЌТўЊтЈў№╝їТЅђС╗ЦТЏ┐ТЇбТЋ░у╗ёуџёУ░ЃућеТў»тјЪтГљ№╝ѕ5№╝Ѕсђѓ</li> <li>тєЎТЊЇСйютљјтѕЏт╗║уџёУ┐ГС╗БтЎет░єУЃйтцЪуюІтѕ░С┐«Тћ╣уџёу╗ЊТъё№╝ѕ6,7№╝Ѕсђѓ</li> <li>тєЎТЌХтцЇтѕХжЏєтљѕУ┐ћтЏъуџёУ┐ГС╗БтЎеСИЇС╝џТіЏтЄ║ ConcurrentModificationException№╝їтЏаСИ║т«ЃС╗гтюеТЋ░у╗ёуџёт┐ФуЁДСИітиЦСйю№╝їт╣ХСИћТЌаУ«║тљју╗ГуџёС┐«Тћ╣№╝ѕ2,4№╝ЅтдѓСйЋ№╝їжЃйС╝џтЃЈУ┐ГС╗БтЎетѕЏт╗║ТЌХжѓБТаит«їтЁеУ┐ћтЏътЁЃу┤асђѓ</li></ul></li></ul> <p align="center"><img src="http://dunwu.test.upcdn.net/cs/java/javacore/container/CopyOnWriteArrayList.png"></p> <h3 id="Т║љуаЂ"><a href="#Т║љуаЂ" class="header-anchor">#</a> Т║љуаЂ</h3> <h4 id="жЄЇУдЂт▒ъТђД"><a href="#жЄЇУдЂт▒ъТђД" class="header-anchor">#</a> жЄЇУдЂт▒ъТђД</h4> <ul><li>lock - ТЅДУАїтєЎТЌХтцЇтѕХТЊЇСйю№╝їжюђУдЂСй┐ућетЈ»жЄЇтЁЦжћЂтіажћЂ</li> <li>array - т»╣У▒АТЋ░у╗ё№╝їућеС║јтГўТћЙтЁЃу┤а</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">/** The lock protecting all mutators */</span>
    <span class="token keyword">final</span> <span class="token keyword">transient</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/** The array, accessed only via getArray/setArray. */</span>
    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token keyword">volatile</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">;</span>
</code></pre></div><h4 id="жЄЇУдЂТќ╣Т│Ћ"><a href="#жЄЇУдЂТќ╣Т│Ћ" class="header-anchor">#</a> жЄЇУдЂТќ╣Т│Ћ</h4> <ul><li>Ти╗тіаТЊЇСйю
<ul><li>Ти╗тіауџёжђ╗УЙЉтЙѕу«ђтЇЋ№╝їтЁѕт░єтјЪт«╣тЎе copy СИђС╗й№╝їуёХтљјтюеТќ░тЅ»ТюгСИіТЅДУАїтєЎТЊЇСйю№╝їС╣ІтљјтєЇтѕЄТЇбт╝ЋућесђѓтйЊуёХТГцУ┐ЄуеІТў»УдЂтіажћЂуџёсђѓ</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ReentrantLockтіажћЂ№╝їС┐ЮУ»Ђу║┐уеІт«ЅтЁе</span>
    <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">;</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token comment">//ТІиУ┤ЮтјЪт«╣тЎе№╝їжЋ┐т║дСИ║тјЪт«╣тЎежЋ┐т║дтіаСИђ</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newElements <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//тюеТќ░тЅ»ТюгСИіТЅДУАїТи╗тіаТЊЇСйю</span>
        newElements<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token comment">//т░єтјЪт«╣тЎет╝ЋућеТїЄтљЉТќ░тЅ»Тюг</span>
        <span class="token function">setArray</span><span class="token punctuation">(</span>newElements<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">//УДБжћЂ</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>тѕажЎцТЊЇСйю
<ul><li>тѕажЎцТЊЇСйютљїуљє№╝їт░єжЎцУдЂтѕажЎцтЁЃу┤аС╣ІтцќуџётЁХС╗ќтЁЃу┤аТІиУ┤Ютѕ░Тќ░тЅ»ТюгСИГ№╝їуёХтљјтѕЄТЇбт╝Ћуће№╝їт░єтјЪт«╣тЎет╝ЋућеТїЄтљЉТќ░тЅ»Тюгсђѓтљїт▒ътєЎТЊЇСйю№╝їжюђУдЂтіажћЂсђѓ</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//тіажћЂ</span>
    <span class="token keyword">final</span> <span class="token class-name">ReentrantLock</span> lock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">;</span>
    lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements <span class="token operator">=</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> len <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">//тдѓТъюУдЂтѕажЎцуџёТў»тѕЌУАеТюФуФ»ТЋ░ТЇ«№╝їТІиУ┤ЮтЅЇlen-1СИфТЋ░ТЇ«тѕ░Тќ░тЅ»ТюгСИі№╝їтєЇтѕЄТЇбт╝Ћуће</span>
            <span class="token function">setArray</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//тљдтѕЎ№╝їт░єжЎцУдЂтѕажЎцтЁЃу┤аС╣ІтцќуџётЁХС╗ќтЁЃу┤аТІиУ┤Ютѕ░Тќ░тЅ»ТюгСИГ№╝їт╣ХтѕЄТЇбт╝Ћуће</span>
            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newElements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newElements<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> newElements<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                              numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setArray</span><span class="token punctuation">(</span>newElements<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">//УДБжћЂ</span>
        lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>У»╗ТЊЇСйю
<ul><li>CopyOnWriteArrayList уџёУ»╗ТЊЇСйюТў»СИЇућетіажћЂуџё№╝їТђДУЃйтЙѕжФўсђѓ</li></ul></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="уц║СЙІ"><a href="#уц║СЙІ" class="header-anchor">#</a> уц║СЙІ</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CopyOnWriteArrayListDemo</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ReadTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>

        <span class="token class-name">ReadTask</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WriteTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
        <span class="token keyword">int</span> index<span class="token punctuation">;</span>

        <span class="token class-name">WriteTask</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> index<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">&quot;write_&quot;</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> NUM <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token comment">// ArrayList тюет╣ХтЈЉУ┐ГС╗БУ«┐жЌ«ТЌХС╝џТіЏтЄ║ ConcurrentModificationException т╝ѓтИИ</span>
        <span class="token comment">// List&lt;String&gt; list = new ArrayList&lt;&gt;();</span>
        <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;main_&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">ExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span>NUM<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ReadTask</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WriteTask</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        executorService<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">CopyOnWriteArrayListDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="тЈѓУђЃУхёТќЎ"><a href="#тЈѓУђЃУхёТќЎ" class="header-anchor">#</a> тЈѓУђЃУхёТќЎ</h2> <ul><li><a href="https://item.jd.com/10922250.html" target="_blank" rel="noopener noreferrer">сђіJava т╣ХтЈЉу╝ќуеІт«ъТѕўсђІ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://item.jd.com/11740734.html" target="_blank" rel="noopener noreferrer">сђіJava т╣ХтЈЉу╝ќуеІуџёУЅ║Тю»сђІ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>https://blog.csdn.net/u010425776/article/details/54890215</li> <li>https://blog.csdn.net/wangxiaotongfan/article/details/52074160</li> <li>https://my.oschina.net/hosee/blog/675884</li> <li>https://www.jianshu.com/p/c0642afe03e0</li> <li>https://www.jianshu.com/p/f6730d5784ad</li> <li>http://www.javarticles.com/2012/06/copyonwritearraylist.html</li> <li>https://www.cnblogs.com/xrq730/p/5020760.html</li> <li>https://www.cnblogs.com/leesf456/p/5547853.html</li> <li>http://www.cnblogs.com/chengxiao/p/6881974.html</li> <li>http://www.cnblogs.com/dolphin0520/p/3933404.html</li> <li><a href="https://juejin.im/post/5b551e8df265da0f84562403" target="_blank" rel="noopener noreferrer">HashMap? ConcurrentHashMap? уЏИС┐АуюІт«їУ┐Ўу»ЄТ▓АС║║УЃйжџЙСйЈСйа№╝Ђ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javacore/edit/master/docs/concurrent/java-concurrent-container.md" target="_blank" rel="noopener noreferrer">тИ«тіЕТѕЉС╗гТћ╣тќёТГцжАхжЮб№╝Ђ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/javacore/assets/js/app.3de50782.js" defer></script><script src="/javacore/assets/js/4.13456b84.js" defer></script><script src="/javacore/assets/js/33.ac464a7a.js" defer></script><script src="/javacore/assets/js/5.65836544.js" defer></script>
  </body>
</html>
